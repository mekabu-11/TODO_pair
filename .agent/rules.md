# プロジェクトルール

このファイルは、AIアシスタントがコードを編集する際に従うべきルールを定義します。

## コーディングスタイル

### JavaScript/React
- ES6+の構文を使用する
- アロー関数を優先する
- `const`を優先し、再代入が必要な場合のみ`let`を使用
- 関数コンポーネントとReact Hooksを使用する
- PropTypesまたはTypeScriptで型を定義する

### ファイル命名規則
- コンポーネント: `PascalCase.jsx`
- ユーティリティ: `camelCase.js`
- 定数ファイル: `UPPER_CASE.js`

## プロジェクト構造

### フロントエンド (`/frontend`)
- **src/components/**: 再利用可能なReactコンポーネント
- **src/pages/**: ページコンポーネント
- **src/lib/**: ユーティリティとライブラリ
- **src/hooks/**: カスタムReact Hooks

### バックエンド (`/backend`)
- **routes/**: APIルート定義
- **models/**: データモデル
- **middleware/**: Expressミドルウェア
- **utils/**: ユーティリティ関数

## 環境変数

- 環境変数は`.env`ファイルに定義
- Viteプロジェクトでは`VITE_`プレフィックスを使用
- センシティブな情報は絶対にコミットしない
- `.env.example`を常に最新に保つ

## データベース

- Supabaseを使用
- データベース変更はマイグレーションで管理
- SQLインジェクション対策を必ず実施

## Docker

- 開発環境: `docker-compose.yml`
- 本番環境: `docker-compose.prod.yml`
- コンテナ名は明確に定義する

## Git

- コミットメッセージは日本語か英語で明確に
- 機能追加は`feature/`ブランチで
- バグ修正は`fix/`ブランチで
- mainブランチへの直接コミットは避ける

## セキュリティ

- APIキーは環境変数で管理
- ユーザー入力は必ずバリデーション
- CORS設定を適切に行う
- HTTPSを使用する（本番環境）

## パフォーマンス

- 画像は最適化する
- 不要な再レンダリングを避ける（React.memo、useMemo、useCallbackを活用）
- APIリクエストは必要最小限に

## テスト

- 新機能には必ずテストを追加
- テストカバレッジは80%以上を目指す
- E2Eテストで主要なユーザーフローをカバー

## ドキュメント

- READMEは常に最新に保つ
- 複雑なロジックにはコメントを追加
- APIエンドポイントはドキュメント化する
